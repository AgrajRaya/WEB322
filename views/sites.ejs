<!DOCTYPE html>
<html lang="en" data-theme="autumn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Site Collection</title>
  <link href="/css/main.css" rel="stylesheet">
</head>

<body class="min-h-screen">
  <!-- Include Navbar with 'page' variable for active highlighting -->
  <%- include('partials/navbar', { page: '/sites' }) %>

  <!-- Hero Section -->
  <div class="hero bg-base-200 rounded-box p-8 mb-8">
    <div class="hero-content text-center">
      <h1 class="text-4xl font-bold">Site Collection</h1>
      <div class="mt-4">
        <!-- Filter Links for Regions -->
        <h3>Filter by Region:</h3>
        <a href="/sites?region=Atlantic Region" class="btn btn-sm btn-outline">Atlantic Region</a>
        <a href="/sites?region=Central Canada" class="btn btn-sm btn-outline">Central Canada</a>
        <a href="/sites?region=Prairie Provinces" class="btn btn-sm btn-outline">Prairie Provinces</a>
        <a href="/sites?region=West Coast" class="btn btn-sm btn-outline">West Coast</a>
    
        <!-- Filter Links for Provinces -->
        <h3>Filter by Province/Territory:</h3>
        <a href="/sites?provinceOrTerritory=Ontario" class="btn btn-sm btn-outline">Ontario</a>
        <a href="/sites?provinceOrTerritory=Quebec" class="btn btn-sm btn-outline">Quebec</a>
        <a href="/sites?provinceOrTerritory=Alberta" class="btn btn-sm btn-outline">Alberta</a>

    </div>
    
    </div>
  </div>

  <!-- Table to display sites -->
  <div class="container mx-auto px-4 py-8">
    <table class="table w-full table-zebra">
      <thead>
        <tr>
          <th>Image</th>
          <th>Site</th>
          <th>Date and Designation</th>
          <th>Location</th>
          <th>Region</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        <!-- Iterate over the sites array to render data -->
        <% sites.forEach(site => { %>
        <tr>
          <!-- Site Image -->
          <td><img src="<%= site.image %>" alt="<%= site.site %>" class="w-16 h-16 object-cover rounded-full" /></td>

          <!-- Site Name -->
          <td><%= site.site %></td>

          <!-- Date and Designated Information -->
          <td>
            Date: <%= site.date %> (<%= site.dataType %>)<br>
            Designated: <%= site.designated %>
          </td>

          <!-- Location (Province/Territory) -->
          <td>
            <a href="/sites?provinceOrTerritory=<%= site.provinceOrTerritoryObj.name %>" class="btn btn-sm btn-outline">
              <%= site.provinceOrTerritoryObj.name %>
            </a>
          </td>

          <!-- Region -->
          <td>
            <a href="/sites?region=<%= site.provinceOrTerritoryObj.region %>" class="btn btn-sm btn-outline">
              <%= site.provinceOrTerritoryObj.region %>
            </a>
          </td>

          <!-- Details Link -->
          <td>
            <a href="/sites/<%= site.siteId %>" class="btn btn-sm btn-primary">Details</a>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</body>

</html>
